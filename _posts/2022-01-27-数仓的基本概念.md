---
layout:     post
title:      数仓的基本概念
subtitle:   
date:       2022-01-27
author:     dex0423
header-img: img/post-bg-os-metro.jpg
catalog: true
tags:
    - 数仓
---


# 1. 数仓的特点

##### 1.1. 面向主题

![]({{site.baseurl}}/img-post/数仓-1.png)

##### 1.2. 集成

- 跨部门
- 跨系统

![]({{site.baseurl}}/img-post/数仓-2.png)

##### 1.3. 稳定

- 非事务性，不经常变化


##### 1.4. 反映历史变化



# 2. 数仓模型

##### 2.1. 星型模型



##### 2.2. 雪花模型

# 3. 数仓系统模块

##### 3.1. 数仓搭建

##### 3.2. ETL

##### 3.3. 分析报表

##### 3.4. 数据挖掘

##### 3.5. 数据访问

##### 3.6. 数据安全

##### 3.7. 元数据管理

##### 3.8. 项目管理


# 数仓建设步骤

##### 确定主题

##### 确定量度（数值、KPI指标）

##### 确定事实粒度

##### 确定维度

##### 创建事实表



# 3. 集群规模参考值

##### 3.1. 日数据量：

- 日活 100万，每人 100 条日志，共计 100万 X 100 = 1 亿条；

##### 3.2. 日存储量：

- 每条日志 1K 大小，每天：1亿条 / 1024 / 1024 = 100G；

##### 3.3. 半年不扩容：

- 100G/天 X 180天 = 18T；

##### 3.4. 保存 3 副本：

- 18 t x 3 = 54T；

##### 3.5. 预留 Buff：

- 预留 20% ~ 30% Buff = 54T / 0.7 = 77T；

##### 3.6. 服务器需求

- 8T * 10 台标准服务器（20核 / 128G / 8T HDD / 2T SSD）；

>注意：此方案未考虑 **数仓分层 和 数据压缩** ！

# 4. 服务器规划注意事项

- ResourceManager 和 NameNode 不能放在同一台服务器；
- ResourceManager 需要做高可用；
- ZooKeeper，安装台数为 **奇数**，最少 3 台；
- Kafka，与 ZooKeeper 安装在一起，Kafka 与 ZooKeeper 有大量的数据通信；
- Flume，与 Kafka 安装在一起，Flume 采集完的数据需要快速写入 Kafka；
  - 如果有专门的额日志服务器，一般单独部署 Flume 到日志服务器；

