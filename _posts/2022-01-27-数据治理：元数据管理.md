---
layout:     post
title:      数据治理：元数据管理
subtitle:   
date:       2022-01-27
author:     dex0423
header-img: img/post-bg-os-metro.jpg
catalog: true
tags:
    - 数仓
---

# 1. 元数据概念

##### 1.1. 元数据定义

- 元数据（Metadata），又称中介数据、中继数据，为描述数据的数据（data about data），主要是描述数据属性（property）的信息，用来支持如指示存储位置、历史数据、资源查找、文件记录等功能。
- 元数据算是一种电子式目录，为了达到编制目录的目的，必须在描述并收藏数据的内容或特色，进而达成协助数据检索的目的。
- 对于 RMDB 库来说，元数据（字典）是属于数据库本身的一些数据，包含数据库名、数据库字符集、表名、表的大小、表的记录行数、表的字符集、表的字段、表的索引、表的描述、字段的类型、字段的精度、字段的描述等。对于来自 information_schema 的数据库内部数据，如表的大小、表的行数可能不是非常精准，仅做数量级的参考。
>注意：业务数据才会有元数据这个概念，系统日志、备份数据是没有元数据这个概念的。


##### 1.2. 元数据管理

- 元数据管理，是为了对数据资产进行有效的组织。它使用元数据来帮助管理他们的数据。它还可以帮助数据专业人员收集、组织、访问和丰富元数据，以支持数据治理。



##### 1.3. 元数据管理的价值

- 元数据管理，最重要的意义就是数据资源的可管、可控、可查。
- 元数据管理，可以方便的进行数据调研成果的落地、共享，支撑数仓螺旋开发。这是团队协作的要求，也是项目经验的知识沉淀。
- 支撑各类数据报表、运营统计，为后续数据处理提供基础元数据查询。
  - 比如：统计接入了多少个系统、每个系统有多少张表，数据清洗需要知道每张表的字段信息。
- 元数据还可以通过 OpenAPI 实现导出，快速支持保障合规审计等工作。


# 2. 元数据的种类

##### 2.1. 数据结构
- 数据集的名称、关系、字段、属性、约束、键；

##### 2.2. 数据部署
- 数据集的物理位置；

##### 2.3. 存储过程
- TODO

##### 2.4. 数据依赖
- 数据流向，ETL规则，数据集之间的依赖关系；

##### 2.5. 质量度量
- 数据集上可以计算的度量；

##### 2.6. 度量逻辑关系
- 数据集度量之间的逻辑关系；

##### 2.7. ETL 过程
- ETL 顺序、并行&串行；

##### 2.8. 数据集快照
- 某一时间点上，数据在所有数据集上的分布情况；

##### 2.9. 数据模型元数据
- 事实表、维度、属性、层次；

##### 2.10. 报表语义
- 报表的指标体系、规则、过滤条件；
- 物理名称 & 业务名称对应关系；

##### 2.11. 数据访问日志
- 数据被用户访问的情况；

##### 2.12. 质量稽核日志
- 何时、哪个度量被稽核；

##### 2.13. 数据装载日志
- 那些数据、何时、被谁装载；


# 3. RMDB 元数据

##### 3.1. 库

- 名称
- 字符集

##### 3.2. 表
- 名称
- 描述
- 字符集
- 行数
- 容量

##### 3.3. 字段
- 名字
- 类型
- 是否可空
- 长度
- 精度
- 描述

##### 3.4. 索引
- 名字
- 类型
- 索引字段

##### 3.5. 可编程对象
- 名称
- 类型

##### 3.6. 模式 SQL_MODE

- 查看 SQL_MODE 设置情况

```aidl

mysql> SHOW VARIABLES LIKE 'SQL_MODE';
+---------------+--------------------------------------------+
| Variable_name | Value                                      |
+---------------+--------------------------------------------+
| sql_mode      | STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION |
+---------------+--------------------------------------------+
1 row in set (0.00 sec)

mysql> SELECT @@global.SQL_MODE;
+--------------------------------------------+
| @@global.SQL_MODE                          |
+--------------------------------------------+
| STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION |
+--------------------------------------------+
1 row in set (0.00 sec)

mysql> SELECT @@session.SQL_MODE;
+--------------------------------------------+
| @@session.SQL_MODE                         |
+--------------------------------------------+
| STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION |
+--------------------------------------------+
1 row in set (0.00 sec)
```

- 在 client 设置 SQL_MODE
```aidl
mysql> SET global sql_mode='STRICT_TRANS_TABLES';
Query OK, 0 rows affected (0.00 sec)
```
- 参考文章
  
  - SQL_MODE 更多信息，可以参考文章 《 <a href="http://blog.itpub.net/26736162/viewspace-2149027/">MySQL SQL Mode（模式）介绍</a> 》。

##### 3.7. Key
- primary key
- unique key

# 4. 获取元数据的方式

##### 定时全量采集

##### 
##### 
##### 
##### 
##### 
##### 
##### 
##### 

业务系统

